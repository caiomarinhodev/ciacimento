<table id="table" class="table table-bordered table-striped" class="display"
       cellspacing="0" width="100%">
    <thead>
    <tr>
        <th>ID</th>
        <th>LOJA</th>
        <th>ENDEREÇO LOJA</th>
        <th>N° ENTREGAS</th>
        <th>VALOR TOTAL</th>
        <th>COLETADO?</th>
        <th>STATUS</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    {% for pedido in pedidos %}
        <tr>
            <td>{{ pedido.id }}</td>
            <td>
                {{ pedido.estabelecimento }}
            </td>
            <td>
                {{ pedido.estabelecimento.endereco }}, {{ pedido.estabelecimento.numero }}, {{ pedido.estabelecimento.bairro }}
            </td>
            <td>
                {{ pedido.ponto_set.all|length }}
            </td>
            <td>
                {{ pedido.valor_total }}
            </td>

            <td>
                {% if item.coletado %}
                    <label class="label label-success"><i
                            class=""></i>
                        COLETADO</label>
                {% else %}
                    <label class="label label-danger"><i
                            class=""></i> NÃO COLETADO</label>
                {% endif %}
            </td>
            <td>
                {% if pedido.is_complete %}
                    <label class="label label-success"><i
                            class=""></i>
                        ENTREGUE</label>
                {% else %}
                    <label class="label label-warning"><i
                            class=""></i> EM ANDAMENTO</label>
                {% endif %}
            </td>
            <td>
                <a href="#" class="btn btn-danger cancelar_corrida_{{ pedido.pk }}">
                    Cancelar Corrida
                </a>

                <script>
                    $(document).ready(function () {
                        $('.cancelar_corrida_{{ pedido.pk }}').click(function () {
                            swal({
                                    title: "Deseja  cancelar a corrida ?",
                                    text: "Avisaremos a Loja {{ pedido.estabelecimento.first_name }}, e colocaremos no seu histórico este cancelamento.",
                                    type: "warning",
                                    showCancelButton: true,
                                    confirmButtonClass: "btn-danger",
                                    confirmButtonText: "Confirmar Corrida",
                                    cancelButtonText: "Cancelar",
                                    closeOnConfirm: false
                                },
                                function (isConfirm) {
                                    if (isConfirm) {
                                        swal({
                                                title: "Corrida Cancelada!",
                                                text: "Esta corrida foi cancelada e está disponível novamente",
                                                type: "success",
                                                confirmButtonClass: "btn-success",
                                                confirmButtonText: "OK"
                                            },
                                            function () {
                                                window.location.href = '/cancel-corrida/{{ pedido.pk }}';
                                            });
                                    }
                                });
                        });
                    });
                </script>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>